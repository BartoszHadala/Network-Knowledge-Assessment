<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="103px" preserveAspectRatio="none" style="width:227px;height:103px;background:#000000;" version="1.1" viewBox="0 0 227 103" width="227px" zoomAndPan="magnify"><defs/><g><rect fill="#021501" height="1" style="stroke: #021501; stroke-width: 1.0;" width="1" x="0" y="0"/><rect fill="#33FF02" height="24.0679" style="stroke: #33FF02; stroke-width: 1.0;" width="221" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="219" x="6" y="20">[From diagrams.puml (line 67) ]</text><text fill="#33FF02" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="0" x="9" y="43.0679"/><text fill="#33FF02" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="183" x="5" y="62.1358">@startuml sequence_login</text><text fill="#33FF02" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="5" y="81.2038">!theme plain</text><text fill="#FF0000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="93" x="9" y="100.2717">Syntax Error?</text><!--MD5=[a67ec2f057f2a7a362969169211724f4]
@startuml sequence_login
!theme plain
title Sequence Diagram - User Login

actor User
participant "Client" as C
participant "TCP Socket" as S
participant "Server" as SRV
participant "Server Utils" as SU

User -> C: Start client
C -> C: Connect to server\n(IP:PORT or - -discover)
C -> SRV: TCP Connection
activate SRV

User -> C: Enter nickname
C -> C: Create TLV_LOGIN_REQUEST
C -> S: Send LOGIN_REQUEST\n{nick_length, nick}
S -> SRV: Deliver message

SRV -> SU: server_handle_login()
activate SU

SU -> SU: Parse nickname
SU -> SU: Validate format\n(length, chars)

alt Valid & Available
    SU -> SU: Add to active_nicks[]
    SU -> SU: Save to connection_nicks[]
    SU -> SU: Create LOGIN_RESPONSE\n(status=SUCCESS)
    SU -> S: Send response
    S -> C: Deliver response
    C -> User: "Login successful!"
else Invalid or Taken
    SU -> SU: Create LOGIN_RESPONSE\n(status=ERROR)
    SU -> S: Send response
    S -> C: Deliver response
    C -> User: "Login failed:\n<error message>"
end

deactivate SU
deactivate SRV

@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.9+10-Ubuntu-124.04
Operating System: Linux
Default Encoding: UTF-8
Language: pl
Country: PL
--></g></svg>